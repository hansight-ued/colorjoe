{"version":3,"file":"colorjoe.min.js","sources":["../node_modules/dragjs/dist/dragjs.umd.js","../src/utils.js","../src/extras.js","../src/colorjoe.js"],"sourcesContent":["(function (root, factory) {\r\n\r\n        if (typeof exports === 'object') {\r\n            module.exports = factory();\r\n        }\r\n        else if (typeof define === 'function' && define.amd) {\r\n            define(factory);\r\n        }\r\n        else {\r\n            root.drag = factory();\r\n        }\r\n\r\n    }(this, function () {\r\n\r\n        /*! dragjs - v0.8.0 - Juho Vepsalainen <bebraw@gmail.com> - MIT\nhttps://bebraw.github.com/dragjs - 2018-07-03 */\nvar drag = (function() {\n    function drag(elem, cbs) {\n        if(!elem) {\n            console.warn('drag is missing elem!');\n            return;\n        }\n\n        dragTemplate(elem, cbs, 'touchstart', 'touchmove', 'touchend');\n        dragTemplate(elem, cbs, 'mousedown', 'mousemove', 'mouseup');\n    }\n\n    function xyslider(o) {\n        var twod = div(o['class'] || '', o.parent);\n        var pointer = div('pointer', twod);\n        div('shape shape1', pointer);\n        div('shape shape2', pointer);\n        div('bg bg1', twod);\n        div('bg bg2', twod);\n\n        drag(twod, attachPointer(o.cbs, pointer));\n\n        return {\n            background: twod,\n            pointer: pointer\n        };\n    }\n\n    function slider(o) {\n        var oned = div(o['class'], o.parent);\n        var pointer = div('pointer', oned);\n        div('shape', pointer);\n        div('bg', oned);\n\n        drag(oned, attachPointer(o.cbs, pointer));\n\n        return {\n            background: oned,\n            pointer: pointer\n        };\n    }\n\n    drag.xyslider = xyslider;\n    drag.slider = slider;\n\n    return drag;\n\n    function attachPointer(cbs, pointer) {\n        var ret = {};\n\n        for(var n in cbs) {\n          ret[n] = wrap(cbs[n]);\n        }\n\n        function wrap(fn) {\n            return function(p) {\n                p.pointer = pointer;\n                fn(p);\n            };\n        }\n\n        return ret;\n    }\n\n    // move to elemutils lib?\n    function div(klass, p) {\n        return e('div', klass, p);\n    }\n\n    function e(type, klass, p) {\n        var elem = document.createElement(type);\n        if(klass) {\n          elem.className = klass;\n        }\n        p.appendChild(elem);\n\n        return elem;\n    }\n\n    function dragTemplate(elem, cbs, down, move, up) {\n        var dragging = false;\n\n        cbs = getCbs(cbs);\n\n        var beginCb = cbs.begin;\n        var changeCb = cbs.change;\n        var endCb = cbs.end;\n\n        on(elem, down, function(e) {\n            dragging = true;\n\n            var moveHandler = partial(callCb, changeCb, elem);\n            function upHandler() {\n                dragging = false;\n\n                off(document, move, moveHandler);\n                off(document, up, upHandler);\n\n                callCb(endCb, elem, e);\n            }\n\n            on(document, move, moveHandler);\n            on(document, up, upHandler);\n\n            callCb(beginCb, elem, e);\n        });\n    }\n\n    // https://github.com/WICG/EventListenerOptions/blob/gh-pages/explainer.md#feature-detection\n    function on(elem, evt, handler) {\n        // Test via a getter in the options object to see if the passive property is accessed\n        var supportsPassive = false;\n        try {\n        var opts = Object.defineProperty({}, 'passive', {\n            get: function() {\n            supportsPassive = true;\n            }\n        });\n        window.addEventListener(\"testPassive\", null, opts);\n        window.removeEventListener(\"testPassive\", null, opts);\n        } catch (e) {}\n\n        elem.addEventListener(evt, handler, supportsPassive ? { passive: false } : false);\n    }\n\n    function off(elem, evt, handler) {\n      elem.removeEventListener(evt, handler, false);\n    }\n\n    function getCbs(cbs) {\n        if(!cbs) {\n            var initialOffset;\n            var initialPos;\n\n            return {\n                begin: function(c) {\n                    initialOffset = {x: c.elem.offsetLeft, y: c.elem.offsetTop};\n                    initialPos = c.cursor;\n                },\n                change: function(c) {\n                    style(c.elem, 'left', (initialOffset.x + c.cursor.x - initialPos.x) + 'px');\n                    style(c.elem, 'top', (initialOffset.y + c.cursor.y - initialPos.y) + 'px');\n                },\n                end: empty\n            };\n        }\n        else {\n            return {\n                begin: cbs.begin || empty,\n                change: cbs.change || empty,\n                end: cbs.end || empty\n            };\n        }\n    }\n\n    // TODO: set draggable class (handy for fx)\n    function style(e, prop, value) {\n        e.style[prop] = value;\n    }\n\n    function empty() {}\n\n    function callCb(cb, elem, e) {\n        e.preventDefault();\n\n        var offset = findPos(elem);\n        var width = elem.clientWidth;\n        var height = elem.clientHeight;\n        var cursor = {\n            x: cursorX(elem, e),\n            y: cursorY(elem, e)\n        };\n        var x = (cursor.x - offset.x) / width;\n        var y = (cursor.y - offset.y) / height;\n\n        cb({\n            x: isNaN(x)? 0: x,\n            y: isNaN(y)? 0: y,\n            cursor: cursor,\n            elem: elem,\n            e: e\n        });\n    }\n\n    // http://stackoverflow.com/questions/4394747/javascript-curry-function\n    function partial(fn) {\n        var slice = Array.prototype.slice;\n        var args = slice.apply(arguments, [1]);\n\n        return function() {\n            return fn.apply(null, args.concat(slice.apply(arguments)));\n        };\n    }\n\n    // http://www.quirksmode.org/js/findpos.html\n    function findPos(e) {\n        var r = e.getBoundingClientRect();\n\n        return {\n            x: r.left,\n            y: r.top\n        };\n    }\n\n    // http://javascript.about.com/library/blmousepos.htm\n    function cursorX(elem, evt) {\n        var evtPos = evt.touches ? evt.touches[evt.touches.length -1] : evt;\n        return evtPos.clientX;\n    }\n    function cursorY(elem, evt) {\n        var evtPos = evt.touches ? evt.touches[evt.touches.length -1] : evt;\n        return evtPos.clientY;\n    }\n})();\r\n        return drag;\r\n\r\n    }));","var div = partial(e, 'div');\n\nfunction e(type, klass, p) {\n    var elem = document.createElement(type);\n    elem.className = klass;\n    p.appendChild(elem);\n\n    return elem;\n}\n\n// http://stackoverflow.com/questions/4394747/javascript-curry-function\nfunction partial(fn) {\n    var slice = Array.prototype.slice;\n    var args = slice.apply(arguments, [1]);\n\n    return function() {\n        return fn.apply(null, args.concat(slice.apply(arguments)));\n    };\n}\n\nfunction labelInput(klass, n, p, maxLen) {\n    var id = \"colorPickerInput\" + Math.floor(Math.random() * 1001);\n    var d = div(klass, p);\n    var l = label(n, d, id);\n    var i = input('text', d, maxLen, id);\n\n    return {\n        label: l, \n        input: i\n    };\n}\n\nfunction label(c, p, id) {\n    var elem = e('label', '', p);\n    elem.innerHTML = c;\n\n    if (id) {\n        elem.setAttribute('for', id);\n    }\n\n    return elem;\n}\n\nfunction input(t, p, maxLen, id) {\n    var elem = e('input', '', p);\n    elem.type = t;\n\n    if(maxLen) { \n        elem.maxLength = maxLen;\n    }\n\n    if (id) {\n        elem.setAttribute('id', id);\n    }\n\n    if(maxLen) {\n        elem.maxLength = maxLen;\n    }\n\n    return elem;\n}\n\nfunction X(p, a) {\n    p.style.left = clamp(a * 100, 0, 100) + '%';\n}\nfunction Y(p, a) {\n    p.style.top = clamp(a * 100, 0, 100) + '%';\n}\nfunction BG(e, c) {\n    e.style.background = c;\n}\n\nfunction clamp(a, minValue, maxValue) {\n    return Math.min(Math.max(a, minValue), maxValue);\n}\n\nexport default {\n    clamp: clamp,\n    e: e,\n    div: div,\n    partial: partial,\n    labelInput: labelInput,\n    X: X,\n    Y: Y,\n    BG: BG\n};\n","import drag from 'dragjs';\nimport utils from './utils';\n\nfunction currentColor(p) {\n    var e1 = utils.div('currentColorContainer', p);\n    var e = utils.div('currentColor', e1);\n\n    return {\n        change: function(col) {\n            utils.BG(e, col.cssa());\n        }\n    };\n}\n\nfunction fields(p, joe, o) {\n    var cs = o.space;\n    var fac = o.limit || 255;\n    var fix = o.fix >= 0? o.fix: 0;\n    var inputLen = ('' + fac).length + fix;\n    inputLen = fix? inputLen + 1: inputLen;\n\n    var initials = cs.split('');\n    var useAlpha = cs[cs.length - 1] == 'A';\n    cs = useAlpha? cs.slice(0, -1): cs;\n\n    if(['RGB', 'HSL', 'HSV', 'CMYK'].indexOf(cs) < 0) {\n        return console.warn('Invalid field names', cs);\n    }\n\n    var c = utils.div('colorFields', p);\n    var elems = initials.map(function(n) {\n        n = n.toLowerCase();\n\n        var e = utils.labelInput('color ' + n, n, c, inputLen);\n        e.input.onblur = done;\n        e.input.onkeydown = validate;\n        e.input.onkeyup = update;\n\n        return {\n            name: n, \n            e: e\n        };\n    });\n\n    function done() {\n        joe.done();\n    }\n\n    function validate(e) {\n        if (!(e.ctrlKey || e.altKey) && /^[a-zA-Z]$/.test(e.key)) {\n            e.preventDefault();\n        }\n    }\n\n    function update() {\n        var col = [cs];\n\n        elems.forEach(function(o) {col.push(o.e.input.value / fac);});\n\n        if(!useAlpha) {\n            col.push(joe.getAlpha());\n        }\n\n        joe.set(col);\n    }\n\n    return {\n        change: function(col) {\n            elems.forEach(function(o) {\n                o.e.input.value = (col[o.name]() * fac).toFixed(fix);\n            });\n        }\n    };\n}\n\nfunction alpha(p, joe) {\n    var e = drag.slider({\n        parent: p,\n        'class': 'oned alpha',\n        cbs: {\n            begin: change,\n            change: change,\n            end: done\n        }\n    });\n\n    function done() {\n        joe.done();\n    }\n\n    function change(p) {\n        var val = utils.clamp(p.y, 0, 1);\n\n        utils.Y(p.pointer, val);\n        joe.setAlpha(1 - val);\n    }\n\n    return {\n        change: function(col) {\n            utils.Y(e.pointer, 1 - col.alpha());\n        }\n    };\n}\n\nfunction hex(p, joe, o) {\n    var e = utils.labelInput('hex', o.label || '', p, 7);\n    e.input.value = '#';\n\n    e.input.onkeyup = function(elem) {\n        var key = elem.keyCode || elem.which;\n        var val = elem.target.value;\n        val = val[0] == '#'? val: '#' + val;\n        val = pad(val, 7, '0');\n\n        if(key == 13) {\n            joe.set(val);\n        }\n    };\n\n    e.input.onblur = function(elem) {\n        joe.set(elem.target.value);\n        joe.done();\n    };\n\n    return {\n        change: function(col) {\n            e.input.value = e.input.value[0] == '#'? '#': '';\n            e.input.value += col.hex().slice(1);\n        }\n    };\n}\n\nfunction close(p, joe, o) {\n    var elem = utils.e('a', o['class'] || 'close', p);\n    elem.href = '#';\n    elem.innerHTML = o.label || 'Close';\n\n    elem.onclick = function(e) {\n        e.preventDefault();\n\n        joe.hide();\n    };\n}\n\nfunction pad(a, n, c) {\n    var ret = a;\n\n    for(var i = a.length; i < n; i++) {\n        ret += c;\n    }\n\n    return ret;\n}\n\nexport default {\n    currentColor: currentColor,\n    fields: fields,\n    hex: hex,\n    alpha: alpha,\n    close: close\n};\n","import drag from 'dragjs';\nimport one from 'onecolor'; // Use the all build with cmyk and everything\nimport utils from './utils';\nimport extras from './extras';\n\nvar ONECOLOR = one.color;\nvar colorjoe = function(cbs) {\n    if (!all(isFunction, [cbs.init, cbs.xy, cbs.z])) {\n        return console.warn(\"colorjoe: missing cb\");\n    }\n\n    return function(element, initialColor, extras) {\n        return setup({\n            e: element,\n            color: initialColor,\n            cbs: cbs,\n            extras: extras,\n        });\n    };\n};\n\n/* pickers */\ncolorjoe.rgb = colorjoe({\n    init: function(col, xy, z) {\n        var ret = ONECOLOR(col).hsv();\n\n        this.xy(ret, { x: ret.saturation(), y: 1 - ret.value() }, xy, z);\n        this.z(ret, ret.hue(), xy, z);\n\n        return ret;\n    },\n    xy: function(col, p, xy) {\n        utils.X(xy.pointer, p.x);\n        utils.Y(xy.pointer, p.y);\n\n        return col.saturation(p.x).value(1 - p.y);\n    },\n    z: function(col, v, xy, z) {\n        utils.Y(z.pointer, v);\n        RGB_BG(xy.background, v);\n\n        return col.hue(v);\n    },\n});\n\ncolorjoe.hsl = colorjoe({\n    init: function(col, xy, z) {\n        var ret = ONECOLOR(col).hsl();\n\n        this.xy(ret, { x: ret.hue(), y: 1 - ret.saturation() }, xy, z);\n        this.z(ret, 1 - ret.lightness(), xy, z);\n\n        return ret;\n    },\n    xy: function(col, p, xy, z) {\n        utils.X(xy.pointer, p.x);\n        utils.Y(xy.pointer, p.y);\n        RGB_BG(z.background, p.x);\n\n        return col.hue(p.x).saturation(1 - p.y);\n    },\n    z: function(col, v, xy, z) {\n        utils.Y(z.pointer, v);\n\n        return col.lightness(1 - v);\n    },\n});\n\ncolorjoe.extras = {};\n\ncolorjoe.registerExtra = function(name, fn) {\n    if (name in colorjoe.extras) {\n        console.warn('Extra \"' + name + '\"has been registered already!');\n    }\n\n    colorjoe.extras[name] = fn;\n};\n\nfor (var k in extras) {\n    colorjoe.registerExtra(k, extras[k]);\n}\n\nfunction RGB_BG(e, h) {\n    utils.BG(e, new ONECOLOR.HSV(h, 1, 1).cssa());\n}\n\nfunction setup(o) {\n    if (!o.e) {\n        return console.warn(\"colorjoe: missing element\");\n    }\n\n    var e = isString(o.e) ? document.getElementById(o.e) : o.e;\n    e.className = \"colorPicker\";\n\n    var cbs = o.cbs;\n\n    var xy = drag.xyslider({\n        parent: e,\n        class: \"twod\",\n        cbs: {\n            begin: changeXY,\n            change: changeXY,\n            end: done,\n        },\n    });\n\n    function changeXY(p) {\n        col = cbs.xy(\n            col,\n            {\n                x: utils.clamp(p.x, 0, 1),\n                y: utils.clamp(p.y, 0, 1),\n            },\n            xy,\n            z\n        );\n        changed();\n    }\n\n    var z = drag.slider({\n        parent: e,\n        class: \"oned\",\n        cbs: {\n            begin: changeZ,\n            change: changeZ,\n            end: done,\n        },\n    });\n\n    function changeZ(p) {\n        col = cbs.z(col, utils.clamp(p.y, 0, 1), xy, z);\n        changed();\n    }\n\n    // Initial color\n    var previous = getColor(o.color);\n    var col = cbs.init(previous, xy, z);\n    var listeners = { change: [], done: [] };\n\n    function changed(skip) {\n        skip = isArray(skip) ? skip : [];\n\n        var li = listeners.change;\n        var v;\n\n        for (var i = 0, len = li.length; i < len; i++) {\n            v = li[i];\n            if (skip.indexOf(v.name) == -1) {\n                v.fn(col);\n            }\n        }\n    }\n\n    function done() {\n        // Do not call done callback if the color did not change\n        if (previous.equals(col)) {\n            return;\n        }\n\n        for (var i = 0, len = listeners.done.length; i < len; i++) {\n            listeners.done[i].fn(col);\n        }\n\n        previous = col;\n    }\n\n    var ob = {\n        e: e,\n        done: function() {\n            done();\n\n            return this;\n        },\n        update: function(skip) {\n            changed(skip);\n\n            return this;\n        },\n        hide: function() {\n            e.style.display = \"none\";\n\n            return this;\n        },\n        show: function() {\n            e.style.display = \"\";\n\n            return this;\n        },\n        get: function() {\n            return col;\n        },\n        set: function(c) {\n            var oldCol = this.get();\n            col = cbs.init(getColor(c), xy, z);\n\n            if (!oldCol.equals(col)) {\n                this.update();\n            }\n\n            return this;\n        },\n        getAlpha: function() {\n            return col.alpha();\n        },\n        setAlpha: function(v) {\n            col = col.alpha(v);\n\n            this.update();\n\n            return this;\n        },\n        on: function(evt, cb, name) {\n            if (evt == \"change\" || evt == \"done\") {\n                listeners[evt].push({ name: name, fn: cb });\n            } else {\n                console.warn(\n                    'Passed invalid evt name \"' + evt + '\" to colorjoe.on'\n                );\n            }\n\n            return this;\n        },\n        removeAllListeners: function(evt) {\n            if (evt) {\n                delete listeners[evt];\n            } else {\n                for (var key in listeners) {\n                    delete listeners[key];\n                }\n            }\n\n            return this;\n        },\n    };\n\n    setupExtras(e, ob, o.extras);\n    changed();\n\n    return ob;\n}\n\nfunction getColor(c) {\n    if (!isDefined(c)) {\n        return ONECOLOR(\"#000\");\n    }\n    if (c.isColor) {\n        return c;\n    }\n\n    var ret = ONECOLOR(c);\n\n    if (ret) {\n        return ret;\n    }\n\n    if (isDefined(c)) {\n        console.warn(\"Passed invalid color to colorjoe, using black instead\");\n    }\n\n    return ONECOLOR(\"#000\");\n}\n\nfunction setupExtras(p, joe, extras) {\n    if (!extras) {\n        return;\n    }\n\n    var c = utils.div(\"extras\", p);\n    var cbs;\n    var name;\n    var params;\n\n    extras.forEach(function(e, i) {\n        if (isArray(e)) {\n            name = e[0];\n            params = e.length > 1 ? e[1] : {};\n        } else {\n            name = e;\n            params = {};\n        }\n        var extra = name in colorjoe.extras ? colorjoe.extras[name] : null;\n\n        if (extra) {\n            cbs = extra(c, extraProxy(joe, name + i), params);\n            for (var k in cbs) {\n                joe.on(k, cbs[k], name);\n            }\n        }\n    });\n}\n\nfunction extraProxy(joe, name) {\n    var ret = copy(joe);\n\n    ret.update = function() {\n        joe.update([name]);\n    };\n\n    return ret;\n}\n\nfunction copy(o) {\n    // returns a shallow copy\n    var ret = {};\n\n    for (var k in o) {\n        ret[k] = o[k];\n    }\n\n    return ret;\n}\n\nfunction all(cb, a) {\n    return a.map(cb).filter(id).length == a.length;\n}\n\nfunction isArray(o) {\n    return Object.prototype.toString.call(o) === \"[object Array]\";\n}\nfunction isString(o) {\n    return typeof o === \"string\";\n}\nfunction isDefined(input) {\n    return typeof input !== \"undefined\";\n}\nfunction isFunction(input) {\n    return typeof input === \"function\";\n}\nfunction id(a) {\n    return a;\n}\n\nexport default colorjoe;\n"],"names":["module","drag","elem","cbs","dragTemplate","console","warn","xyslider","o","twod","div","parent","pointer","attachPointer","background","slider","oned","ret","n","wrap","fn","p","klass","type","document","createElement","className","appendChild","down","move","up","initialOffset","initialPos","beginCb","begin","empty","change","end","c","x","offsetLeft","y","offsetTop","cursor","style","changeCb","endCb","on","e","moveHandler","slice","Array","prototype","args","apply","arguments","concat","partial","callCb","upHandler","off","evt","handler","supportsPassive","opts","Object","defineProperty","get","window","addEventListener","removeEventListener","passive","prop","value","cb","preventDefault","r","offset","getBoundingClientRect","left","top","width","clientWidth","height","clientHeight","touches","length","clientX","clientY","isNaN","clamp","a","minValue","maxValue","Math","min","max","labelInput","maxLen","id","floor","random","d","label","innerHTML","setAttribute","input","t","maxLength","X","Y","BG","currentColor","e1","utils","col","cssa","fields","joe","cs","space","fac","limit","fix","inputLen","initials","split","useAlpha","indexOf","elems","map","toLowerCase","onblur","done","onkeydown","validate","onkeyup","update","name","ctrlKey","altKey","test","key","forEach","push","getAlpha","set","toFixed","hex","keyCode","which","val","target","i","pad","alpha","class","setAlpha","close","href","onclick","hide","ONECOLOR","one","color","colorjoe","isFunction","init","xy","z","filter","element","initialColor","extras","getElementById","changeXY","changed","changeZ","previous","getColor","listeners","skip","isArray","v","li","len","equals","ob","this","display","show","oldCol","removeAllListeners","params","extra","k","copy","setupExtras","setup","rgb","hsv","saturation","hue","RGB_BG","hsl","lightness","registerExtra","h","HSV","isDefined","isColor","toString","call"],"mappings":";;iYAGYA,UAaD,WACP,SAASC,EAAKC,EAAMC,GACZD,GAKJE,EAAaF,EAAMC,EAAK,aAAc,YAAa,YACnDC,EAAaF,EAAMC,EAAK,YAAa,YAAa,YAL9CE,QAAQC,KAAK,yBAyCrB,OAHAL,EAAKM,SA9BL,SAAkBC,GACd,IAAIC,EAAOC,EAAIF,EAAS,OAAK,GAAIA,EAAEG,QAC/BC,EAAUF,EAAI,UAAWD,GAQ7B,OAPAC,EAAI,eAAgBE,GACpBF,EAAI,eAAgBE,GACpBF,EAAI,SAAUD,GACdC,EAAI,SAAUD,GAEdR,EAAKQ,EAAMI,EAAcL,EAAEL,IAAKS,IAEzB,CACHE,WAAYL,EACZG,QAASA,IAmBjBX,EAAKc,OAfL,SAAgBP,GACZ,IAAIQ,EAAON,EAAIF,EAAS,MAAGA,EAAEG,QACzBC,EAAUF,EAAI,UAAWM,GAM7B,OALAN,EAAI,QAASE,GACbF,EAAI,KAAMM,GAEVf,EAAKe,EAAMH,EAAcL,EAAEL,IAAKS,IAEzB,CACHE,WAAYE,EACZJ,QAASA,IAOVX,EAEP,SAASY,EAAcV,EAAKS,GACxB,IAAIK,EAAM,GAEV,IAAI,IAAIC,KAAKf,EACXc,EAAIC,GAAKC,EAAKhB,EAAIe,IAGpB,SAASC,EAAKC,GACV,OAAO,SAASC,GACZA,EAAET,QAAUA,EACZQ,EAAGC,IAIX,OAAOJ,EAIX,SAASP,EAAIY,EAAOD,GAChB,OAGOE,EAHE,MAGID,EAHGA,EAGID,EAHGA,EAInBnB,EAAOsB,SAASC,cAAcF,GAC/BD,IACDpB,EAAKwB,UAAYJ,GAEnBD,EAAEM,YAAYzB,GAEPA,EAPX,IAAWqB,EAAMD,EAAOD,EAChBnB,EASR,SAASE,EAAaF,EAAMC,EAAKyB,EAAMC,EAAMC,GAkD7C,IAAgB3B,EAEJ4B,EACAC,EAhDJC,GAFJ9B,GA+CYA,EA/CCA,GAiEF,CACH+B,MAAO/B,EAAI+B,OAASC,EACpBC,OAAQjC,EAAIiC,QAAUD,EACtBE,IAAKlC,EAAIkC,KAAOF,GAhBb,CACHD,MAAO,SAASI,GACZP,EAAgB,CAACQ,EAAGD,EAAEpC,KAAKsC,WAAYC,EAAGH,EAAEpC,KAAKwC,WACjDV,EAAaM,EAAEK,QAEnBP,OAAQ,SAASE,GACbM,EAAMN,EAAEpC,KAAM,OAAS6B,EAAcQ,EAAID,EAAEK,OAAOJ,EAAIP,EAAWO,EAAK,MACtEK,EAAMN,EAAEpC,KAAM,MAAQ6B,EAAcU,EAAIH,EAAEK,OAAOF,EAAIT,EAAWS,EAAK,OAEzEJ,IAAKF,IA3DKD,MACdW,EAAW1C,EAAIiC,OACfU,EAAQ3C,EAAIkC,IAEhBU,EAAG7C,EAAM0B,EAAM,SAASoB,GAGpB,IAAIC,EA8FZ,SAAiB7B,GACb,IAAI8B,EAAQC,MAAMC,UAAUF,MACxBG,EAAOH,EAAMI,MAAMC,UAAW,CAAC,IAEnC,OAAO,WACH,OAAOnC,EAAGkC,MAAM,KAAMD,EAAKG,OAAON,EAAMI,MAAMC,cAnG5BE,CAAQC,EAAQb,EAAU3C,GAU5C6C,EAAGvB,SAAUK,EAAMoB,GACnBF,EAAGvB,SAAUM,EAVb,SAAS6B,IAGLC,EAAIpC,SAAUK,EAAMoB,GACpBW,EAAIpC,SAAUM,EAAI6B,GAElBD,EAAOZ,EAAO5C,EAAM8C,KAMxBU,EAAOzB,EAAS/B,EAAM8C,KAK9B,SAASD,EAAG7C,EAAM2D,EAAKC,GAEnB,IAAIC,GAAkB,EACtB,IACA,IAAIC,EAAOC,OAAOC,eAAe,GAAI,UAAW,CAC5CC,IAAK,WACLJ,GAAkB,KAGtBK,OAAOC,iBAAiB,cAAe,KAAML,GAC7CI,OAAOE,oBAAoB,cAAe,KAAMN,GAC9C,MAAOhB,IAET9C,EAAKmE,iBAAiBR,EAAKC,IAASC,GAAkB,CAAEQ,SAAS,IAGrE,SAASX,EAAI1D,EAAM2D,EAAKC,GACtB5D,EAAKoE,oBAAoBT,EAAKC,GAAS,GA8BzC,SAASlB,EAAMI,EAAGwB,EAAMC,GACpBzB,EAAEJ,MAAM4B,GAAQC,EAGpB,SAAStC,KAET,SAASuB,EAAOgB,EAAIxE,EAAM8C,GACtBA,EAAE2B,iBAEF,IA+BIC,EAaef,EAJAA,EAxCfgB,EAiCG,CACHtC,GAHAqC,EA/BiB1E,EA+BX4E,yBAGDC,KACLtC,EAAGmC,EAAEI,KAlCLC,EAAQ/E,EAAKgF,YACbC,EAASjF,EAAKkF,aACdzC,EAAS,CACTJ,GAoCesB,EApCEb,GAqCRa,EAAIwB,QAAUxB,EAAIwB,QAAQxB,EAAIwB,QAAQC,OAAQ,GAAKzB,GAClD0B,SArCV9C,GAuCeoB,EAvCEb,GAwCRa,EAAIwB,QAAUxB,EAAIwB,QAAQxB,EAAIwB,QAAQC,OAAQ,GAAKzB,GAClD2B,UAvCVjD,GAAKI,EAAOJ,EAAIsC,EAAOtC,GAAK0C,EAC5BxC,GAAKE,EAAOF,EAAIoC,EAAOpC,GAAK0C,EAEhCT,EAAG,CACCnC,EAAGkD,MAAMlD,GAAI,EAAGA,EAChBE,EAAGgD,MAAMhD,GAAI,EAAGA,EAChBE,OAAQA,EACRzC,KAAMA,EACN8C,EAAGA,KAnLJ,yCChBPtC,EAAM+C,EAAQT,EAAG,OAErB,SAASA,EAAEzB,EAAMD,EAAOD,GACpB,IAAInB,EAAOsB,SAASC,cAAcF,GAIlC,OAHArB,EAAKwB,UAAYJ,EACjBD,EAAEM,YAAYzB,GAEPA,EAIX,SAASuD,EAAQrC,GACb,IAAI8B,EAAQC,MAAMC,UAAUF,MACxBG,EAAOH,EAAMI,MAAMC,UAAW,CAAC,IAEnC,OAAO,WACH,OAAOnC,EAAGkC,MAAM,KAAMD,EAAKG,OAAON,EAAMI,MAAMC,cAwDtD,SAASmC,EAAMC,EAAGC,EAAUC,GACxB,OAAOC,KAAKC,IAAID,KAAKE,IAAIL,EAAGC,GAAWC,SAG5B,CACXH,MAAOA,EACP1C,EAAGA,EACHtC,IAAKA,EACL+C,QAASA,EACTwC,WA7DJ,SAAoB3E,EAAOJ,EAAGG,EAAG6E,GAC7B,IAAIC,EAAK,mBAAqBL,KAAKM,MAAsB,KAAhBN,KAAKO,UAC1CC,EAAI5F,EAAIY,EAAOD,GAInB,MAAO,CACHkF,OAKOjE,EATGpB,EASAG,EATGiF,EASAH,EATGA,EAUhBjG,EAAO8C,EAAE,QAAS,GAAI3B,GAC1BnB,EAAKsG,UAAYlE,EAEb6D,GACAjG,EAAKuG,aAAa,MAAON,GAGtBjG,GAZHwG,OAeOC,EAnBG,OAmBAtF,EAnBQiF,EAmBLJ,EAnBQA,EAmBAC,EAnBQA,EAoB7BjG,EAAO8C,EAAE,QAAS,GAAI3B,GAC1BnB,EAAKqB,KAAOoF,EAETT,IACChG,EAAK0G,UAAYV,GAGjBC,GACAjG,EAAKuG,aAAa,KAAMN,GAGzBD,IACChG,EAAK0G,UAAYV,GAGdhG,IAhBX,IAAeyG,EAAGtF,EAAG6E,EAAQC,EACrBjG,EAZR,IAAeoC,EAAGjB,EAAG8E,EACbjG,GAiDJ2G,EApBJ,SAAWxF,EAAGsE,GACVtE,EAAEuB,MAAMmC,KAAOW,EAAU,IAAJC,EAAS,EAAG,KAAO,KAoBxCmB,EAlBJ,SAAWzF,EAAGsE,GACVtE,EAAEuB,MAAMoC,IAAMU,EAAU,IAAJC,EAAS,EAAG,KAAO,KAkBvCoB,GAhBJ,SAAY/D,EAAGV,GACXU,EAAEJ,MAAM9B,WAAawB,UCqFV,CACX0E,aAxJJ,SAAsB3F,GAClB,IAAI4F,EAAKC,EAAMxG,IAAI,wBAAyBW,GACxC2B,EAAIkE,EAAMxG,IAAI,eAAgBuG,GAElC,MAAO,CACH7E,OAAQ,SAAS+E,GACbD,EAAMH,GAAG/D,EAAGmE,EAAIC,WAmJxBC,OA9IJ,SAAgBhG,EAAGiG,EAAK9G,GACpB,IAAI+G,EAAK/G,EAAEgH,MACPC,EAAMjH,EAAEkH,OAAS,IACjBC,EAAe,GAATnH,EAAEmH,IAAUnH,EAAEmH,IAAK,EACzBC,GAAY,GAAKH,GAAKnC,OAASqC,EACnCC,EAAWD,EAAKC,EAAW,EAAGA,EAE9B,IAAIC,EAAWN,EAAGO,MAAM,IACpBC,EAAgC,KAArBR,EAAGA,EAAGjC,OAAS,GAG9B,GAFAiC,EAAKQ,EAAUR,EAAGrE,MAAM,GAAI,GAAIqE,EAE7B,CAAC,MAAO,MAAO,MAAO,QAAQS,QAAQT,GAAM,EAC3C,OAAOlH,QAAQC,KAAK,sBAAuBiH,GAG/C,IAAIjF,EAAI4E,EAAMxG,IAAI,cAAeW,GAC7B4G,EAAQJ,EAASK,IAAI,SAAShH,GAC9BA,EAAIA,EAAEiH,cAEN,IAAInF,EAAIkE,EAAMjB,WAAW,SAAW/E,EAAGA,EAAGoB,EAAGsF,GAK7C,OAJA5E,EAAE0D,MAAM0B,OAASC,EACjBrF,EAAE0D,MAAM4B,UAAYC,EACpBvF,EAAE0D,MAAM8B,QAAUC,EAEX,CACHC,KAAMxH,EACN8B,EAAGA,KAIX,SAASqF,IACLf,EAAIe,OAGR,SAASE,EAASvF,GACRA,EAAE2F,SAAW3F,EAAE4F,SAAW,aAAaC,KAAK7F,EAAE8F,MAChD9F,EAAE2B,iBAIV,SAAS8D,IACL,IAAItB,EAAM,CAACI,GAEXU,EAAMc,QAAQ,SAASvI,GAAI2G,EAAI6B,KAAKxI,EAAEwC,EAAE0D,MAAMjC,MAAQgD,KAElDM,GACAZ,EAAI6B,KAAK1B,EAAI2B,YAGjB3B,EAAI4B,IAAI/B,GAGZ,MAAO,CACH/E,OAAQ,SAAS+E,GACbc,EAAMc,QAAQ,SAASvI,GACnBA,EAAEwC,EAAE0D,MAAMjC,OAAS0C,EAAI3G,EAAEkI,QAAUjB,GAAK0B,QAAQxB,QAwF5DyB,IArDJ,SAAa/H,EAAGiG,EAAK9G,GACjB,IAAIwC,EAAIkE,EAAMjB,WAAW,MAAOzF,EAAE+F,OAAS,GAAIlF,EAAG,GAmBlD,OAlBA2B,EAAE0D,MAAMjC,MAAQ,IAEhBzB,EAAE0D,MAAM8B,QAAU,SAAStI,GACvB,IAAI4I,EAAM5I,EAAKmJ,SAAWnJ,EAAKoJ,MAC3BC,EAAMrJ,EAAKsJ,OAAO/E,MAEtB8E,EAgCR,SAAa5D,EAAGzE,EAAGoB,GAGf,IAFA,IAAIrB,EAAM0E,EAEF8D,EAAI9D,EAAEL,OAAQmE,EAAIvI,EAAGuI,IACzBxI,GAAOqB,EAGX,OAAOrB,EAvCGyI,CADNH,EAAgB,KAAVA,EAAI,GAAWA,EAAK,IAAMA,EACjB,EAAG,KAER,IAAPT,GACCxB,EAAI4B,IAAIK,IAIhBvG,EAAE0D,MAAM0B,OAAS,SAASlI,GACtBoH,EAAI4B,IAAIhJ,EAAKsJ,OAAO/E,OACpB6C,EAAIe,QAGD,CACHjG,OAAQ,SAAS+E,GACbnE,EAAE0D,MAAMjC,MAA4B,KAApBzB,EAAE0D,MAAMjC,MAAM,GAAW,IAAK,GAC9CzB,EAAE0D,MAAMjC,OAAS0C,EAAIiC,MAAMlG,MAAM,MA+BzCyG,MAnFJ,SAAetI,EAAGiG,GACd,IAAItE,EAAI/C,EAAKc,OAAO,CAChBJ,OAAQU,EACRuI,MAAS,aACTzJ,IAAK,CACD+B,MAAOE,EACPA,OAAQA,EACRC,IAIR,WACIiF,EAAIe,WAGR,SAASjG,EAAOf,GACZ,IAAIkI,EAAMrC,EAAMxB,MAAMrE,EAAEoB,EAAG,EAAG,GAE9ByE,EAAMJ,EAAEzF,EAAET,QAAS2I,GACnBjC,EAAIuC,SAAS,EAAIN,GAGrB,MAAO,CACHnH,OAAQ,SAAS+E,GACbD,EAAMJ,EAAE9D,EAAEpC,QAAS,EAAIuG,EAAIwC,YA4DnCG,MA3BJ,SAAezI,EAAGiG,EAAK9G,GACnB,IAAIN,EAAOgH,EAAMlE,EAAE,IAAKxC,EAAS,OAAK,QAASa,GAC/CnB,EAAK6J,KAAO,IACZ7J,EAAKsG,UAAYhG,EAAE+F,OAAS,QAE5BrG,EAAK8J,QAAU,SAAShH,GACpBA,EAAE2B,iBAEF2C,EAAI2C,UCvIRC,EAAWC,EAAIC,MACfC,EAAW,SAASlK,GACpB,OAiTSuE,EAjTA4F,GAiTI3E,EAjTQ,CAACxF,EAAIoK,KAAMpK,EAAIqK,GAAIrK,EAAIsK,IAkTnCvC,IAAIxD,GAAIgG,OAAOvE,GAAIb,QAAUK,EAAEL,OAjT7BjF,QAAQC,KAAK,wBAGjB,SAASqK,EAASC,EAAcC,GACnC,OA0ER,SAAerK,GACX,IAAKA,EAAEwC,EACH,OAAO3C,QAAQC,KAAK,6BAGxB,IAAI0C,GAoOUxC,EApOGA,EAAEwC,EAqOC,iBAANxC,EArOUgB,SAASsJ,eAAetK,EAAEwC,GAAKxC,EAAEwC,GAoO7D,IAAkBxC,EAnOdwC,EAAEtB,UAAY,cAEd,IAAIvB,EAAMK,EAAEL,IAERqK,EAAKvK,EAAKM,SAAS,CACnBI,OAAQqC,EACR4G,MAAO,OACPzJ,IAAK,CACD+B,MAAO6I,EACP3I,OAAQ2I,EACR1I,IAAKgG,KAIb,SAAS0C,EAAS1J,GACd8F,EAAMhH,EAAIqK,GACNrD,EACA,CACI5E,EAAG2E,EAAMxB,MAAMrE,EAAEkB,EAAG,EAAG,GACvBE,EAAGyE,EAAMxB,MAAMrE,EAAEoB,EAAG,EAAG,IAE3B+H,EACAC,GAEJO,IAGJ,IAAIP,EAAIxK,EAAKc,OAAO,CAChBJ,OAAQqC,EACR4G,MAAO,OACPzJ,IAAK,CACD+B,MAAO+I,EACP7I,OAAQ6I,EACR5I,IAAKgG,KAIb,SAAS4C,EAAQ5J,GACb8F,EAAMhH,EAAIsK,EAAEtD,EAAKD,EAAMxB,MAAMrE,EAAEoB,EAAG,EAAG,GAAI+H,EAAIC,GAC7CO,IAIJ,IAAIE,EAAWC,EAAS3K,EAAE4J,OACtBjD,EAAMhH,EAAIoK,KAAKW,EAAUV,EAAIC,GAC7BW,EAAY,CAAEhJ,OAAQ,GAAIiG,KAAM,IAEpC,SAAS2C,EAAQK,GACbA,EAAOC,EAAQD,GAAQA,EAAO,GAK9B,IAHA,IACIE,EADAC,EAAKJ,EAAUhJ,OAGVqH,EAAI,EAAGgC,EAAMD,EAAGlG,OAAQmE,EAAIgC,EAAKhC,IACtC8B,EAAIC,EAAG/B,IACsB,GAAzB4B,EAAKrD,QAAQuD,EAAE7C,OACf6C,EAAEnK,GAAG+F,GAKjB,SAASkB,IAEL,IAAI6C,EAASQ,OAAOvE,GAApB,CAIA,IAAK,IAAIsC,EAAI,EAAGgC,EAAML,EAAU/C,KAAK/C,OAAQmE,EAAIgC,EAAKhC,IAClD2B,EAAU/C,KAAKoB,GAAGrI,GAAG+F,GAGzB+D,EAAW/D,GAGf,IAAIwE,EAAK,CACL3I,EAAGA,EACHqF,KAAM,WAGF,OAFAA,IAEOuD,MAEXnD,OAAQ,SAAS4C,GAGb,OAFAL,EAAQK,GAEDO,MAEX3B,KAAM,WAGF,OAFAjH,EAAEJ,MAAMiJ,QAAU,OAEXD,MAEXE,KAAM,WAGF,OAFA9I,EAAEJ,MAAMiJ,QAAU,GAEXD,MAEXzH,IAAK,WACD,OAAOgD,GAEX+B,IAAK,SAAS5G,GACV,IAAIyJ,EAASH,KAAKzH,MAOlB,OANAgD,EAAMhH,EAAIoK,KAAKY,EAAS7I,GAAIkI,EAAIC,GAE3BsB,EAAOL,OAAOvE,IACfyE,KAAKnD,SAGFmD,MAEX3C,SAAU,WACN,OAAO9B,EAAIwC,SAEfE,SAAU,SAAS0B,GAKf,OAJApE,EAAMA,EAAIwC,MAAM4B,GAEhBK,KAAKnD,SAEEmD,MAEX7I,GAAI,SAASc,EAAKa,EAAIgE,GASlB,MARW,UAAP7E,GAA0B,QAAPA,EACnBuH,EAAUvH,GAAKmF,KAAK,CAAEN,KAAMA,EAAMtH,GAAIsD,IAEtCrE,QAAQC,KACJ,4BAA8BuD,EAAM,oBAIrC+H,MAEXI,mBAAoB,SAASnI,GACzB,GAAIA,SACOuH,EAAUvH,QAEjB,IAAK,IAAIiF,KAAOsC,SACLA,EAAUtC,GAIzB,OAAO8C,OAOf,OAwBJ,SAAqBvK,EAAGiG,EAAKuD,GACzB,GAAKA,EAAL,CAIA,IACI1K,EACAuI,EACAuD,EAHA3J,EAAI4E,EAAMxG,IAAI,SAAUW,GAK5BwJ,EAAO9B,QAAQ,SAAS/F,EAAGyG,GACnB6B,EAAQtI,IACR0F,EAAO1F,EAAE,GACTiJ,EAAoB,EAAXjJ,EAAEsC,OAAatC,EAAE,GAAK,KAE/B0F,EAAO1F,EACPiJ,EAAS,IAEb,IAWY3E,EAAKoB,EACjBzH,EAZIiL,EAAQxD,KAAQ2B,EAASQ,OAASR,EAASQ,OAAOnC,GAAQ,KAE9D,GAAIwD,EAEA,IAAK,IAAIC,KADThM,EAAM+L,EAAM5J,GAQCoG,EARkBA,EAAOe,GAS1CxI,EASR,SAAcT,GAEV,IAAIS,EAAM,GAEV,IAAK,IAAIkL,KAAK3L,EACVS,EAAIkL,GAAK3L,EAAE2L,GAGf,OAAOlL,EAjBGmL,CADM9E,EARkBA,IAW9BmB,OAAS,WACTnB,EAAImB,OAAO,CAACC,KAGTzH,GAf2CgL,GAEtC3E,EAAIvE,GAAGoJ,EAAGhM,EAAIgM,GAAIzD,MAlD9B2D,CAAYrJ,EAAG2I,EAAInL,EAAEqK,QACrBG,IAEOW,EAlOIW,CAAM,CACTtJ,EAAG2H,EACHP,MAAOQ,EACPzK,IAAKA,EACL0K,OAAQA,KAwSpB,IAAanG,EAAIiB,GA1OjB,IAAK,IAAIwG,KAxDT9B,EAASkC,IAAMlC,EAAS,CACpBE,KAAM,SAASpD,EAAKqD,EAAIC,GACpB,IAAIxJ,EAAMiJ,EAAS/C,GAAKqF,MAKxB,OAHAZ,KAAKpB,GAAGvJ,EAAK,CAAEsB,EAAGtB,EAAIwL,aAAchK,EAAG,EAAIxB,EAAIwD,SAAW+F,EAAIC,GAC9DmB,KAAKnB,EAAExJ,EAAKA,EAAIyL,MAAOlC,EAAIC,GAEpBxJ,GAEXuJ,GAAI,SAASrD,EAAK9F,EAAGmJ,GAIjB,OAHAtD,EAAML,EAAE2D,EAAG5J,QAASS,EAAEkB,GACtB2E,EAAMJ,EAAE0D,EAAG5J,QAASS,EAAEoB,GAEf0E,EAAIsF,WAAWpL,EAAEkB,GAAGkC,MAAM,EAAIpD,EAAEoB,IAE3CgI,EAAG,SAAStD,EAAKoE,EAAGf,EAAIC,GAIpB,OAHAvD,EAAMJ,EAAE2D,EAAE7J,QAAS2K,GACnBoB,EAAOnC,EAAG1J,WAAYyK,GAEfpE,EAAIuF,IAAInB,MAIvBlB,EAASuC,IAAMvC,EAAS,CACpBE,KAAM,SAASpD,EAAKqD,EAAIC,GACpB,IAAIxJ,EAAMiJ,EAAS/C,GAAKyF,MAKxB,OAHAhB,KAAKpB,GAAGvJ,EAAK,CAAEsB,EAAGtB,EAAIyL,MAAOjK,EAAG,EAAIxB,EAAIwL,cAAgBjC,EAAIC,GAC5DmB,KAAKnB,EAAExJ,EAAK,EAAIA,EAAI4L,YAAarC,EAAIC,GAE9BxJ,GAEXuJ,GAAI,SAASrD,EAAK9F,EAAGmJ,EAAIC,GAKrB,OAJAvD,EAAML,EAAE2D,EAAG5J,QAASS,EAAEkB,GACtB2E,EAAMJ,EAAE0D,EAAG5J,QAASS,EAAEoB,GACtBkK,EAAOlC,EAAE3J,WAAYO,EAAEkB,GAEhB4E,EAAIuF,IAAIrL,EAAEkB,GAAGkK,WAAW,EAAIpL,EAAEoB,IAEzCgI,EAAG,SAAStD,EAAKoE,EAAGf,EAAIC,GAGpB,OAFAvD,EAAMJ,EAAE2D,EAAE7J,QAAS2K,GAEZpE,EAAI0F,UAAU,EAAItB,MAIjClB,EAASQ,OAAS,GAElBR,EAASyC,cAAgB,SAASpE,EAAMtH,GAChCsH,KAAQ2B,EAASQ,QACjBxK,QAAQC,KAAK,UAAYoI,EAAO,iCAGpC2B,EAASQ,OAAOnC,GAAQtH,GAGdyJ,EACVR,EAASyC,cAAcX,EAAGtB,EAAOsB,IAGrC,SAASQ,EAAO3J,EAAG+J,GACf7F,EAAMH,GAAG/D,EAAG,IAAIkH,EAAS8C,IAAID,EAAG,EAAG,GAAG3F,QA8J1C,SAAS+D,EAAS7I,GACd,IAAK2K,EAAU3K,GACX,OAAO4H,EAAS,QAEpB,GAAI5H,EAAE4K,QACF,OAAO5K,EAGX,IAAIrB,EAAMiJ,EAAS5H,GAEnB,OAAIrB,IAIAgM,EAAU3K,IACVjC,QAAQC,KAAK,yDAGV4J,EAAS,SAyDpB,SAASoB,EAAQ9K,GACb,MAA6C,mBAAtCyD,OAAOb,UAAU+J,SAASC,KAAK5M,GAK1C,SAASyM,EAAUvG,GACf,YAAwB,IAAVA,EAElB,SAAS4D,EAAW5D,GAChB,MAAwB,mBAAVA,EAElB,SAASP,EAAGR,GACR,OAAOA"}